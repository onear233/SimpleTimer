<Window
    x:Class="SimpleTimer.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:SimpleTimer"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="SimpleTimer v25.08.03"
    Width="1024"
    Height="768"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">
    <Grid>
        <Grid VerticalAlignment="Stretch">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition />
            </Grid.RowDefinitions>
            <!--  导航栏  -->
            <materialDesign:ColorZone
                Grid.Row="0"
                Grid.Column="0"
                Margin="0,0,0,4"
                Padding="16"
                materialDesign:ElevationAssist.Elevation="Dp4"
                Mode="PrimaryMid">
                <Grid Margin="4,0,4,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <StackPanel
                        Grid.Column="0"
                        Margin="0,-16"
                        VerticalAlignment="Center"
                        Orientation="Horizontal">
                        <Button
                            Margin="0,0,16,0"
                            Padding="0"
                            VerticalAlignment="Center"
                            Click="ButtonBaseToggleNavigationDrawer_OnClick"
                            Content="{materialDesign:PackIcon Menu,
                                                              Size=24}"
                            Style="{StaticResource MaterialDesignToolForegroundButton}"
                            ToolTip="导航栏" />
                    </StackPanel>

                    <StackPanel Grid.Column="1" Orientation="Horizontal">

                        <TextBlock
                            Margin="0,0,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                            Text="应用设置" />
                    </StackPanel>
                    <StackPanel
                        Grid.Column="2"
                        HorizontalAlignment="Right"
                        Orientation="Horizontal">
                        <StackPanel.Resources>
                            <Style BasedOn="{StaticResource MaterialDesignOutlineChip}" TargetType="materialDesign:Chip">
                                <Setter Property="Foreground" Value="{Binding RelativeSource={RelativeSource AncestorType={x:Type FrameworkElement}}, Path=(TextElement.Foreground)}" />
                                <Setter Property="BorderBrush" Value="Black" />
                                <Setter Property="IconForeground" Value="White" />
                                <Setter Property="IconBackground" Value="Black" />
                                <Setter Property="Margin" Value="0,-8,6,-8" />
                            </Style>
                        </StackPanel.Resources>
                        <materialDesign:Chip
                            Click="ButtonRestartApp_OnClick"
                            Icon="{materialDesign:PackIcon Restart}"
                            ToolTip="部分设置需要重启应用后生效。">
                            <TextBlock>
                                <Run Text="需要重启" />
                            </TextBlock>
                        </materialDesign:Chip>

                        <TextBlock
                            Margin="8,0,0,0"
                            VerticalAlignment="Center"
                            Text="Version 0.1"
                            ToolTip="应用版本" />
                        <materialDesign:PopupBox
                            Margin="8,0,-8,0"
                            IsPopupOpen="{Binding ViewModel.IsPopupOpen, Mode=TwoWay}"
                            StaysOpen="False"
                            ToolTip="更多选项…">
                            <StackPanel>
                                <StackPanel>
                                    <!--<MenuItem Icon="{materialDesign:PackIcon WarningCircleOutline}" Header="查看崩溃报告…"/>
            <Separator/>-->
                                    <MenuItem Header="实验性功能…" Icon="{materialDesign:PackIcon Code}" />
                                    <MenuItem Header="调试窗口规则…" Icon="{materialDesign:PackIcon WindowMaximize}" />
                                    <Separator />
                                    <MenuItem
                                        CommandParameter="classisland://app/settings/management?ci_keepHistory=true"
                                        Header="集控选项…"
                                        Icon="{materialDesign:PackIcon WorkOutline}" />
                                    <Separator />
                                    <MenuItem Header="日志…" Icon="{materialDesign:PackIcon FileDocumentOutline}" />
                                    <MenuItem Header="导出诊断数据" Icon="{materialDesign:PackIcon DatabaseExportOutline}" />
                                    <Separator />
                                    <MenuItem Header="打开日志目录…" Icon="{materialDesign:PackIcon FolderTextOutline}" />
                                    <MenuItem Header="打开数据目录…" Icon="{materialDesign:PackIcon FolderFileOutline}" />
                                    <MenuItem Header="打开应用目录…" Icon="{materialDesign:PackIcon FolderDownloadOutline}" />

                                </StackPanel>

                            </StackPanel>
                        </materialDesign:PopupBox>
                    </StackPanel>
                </Grid>
            </materialDesign:ColorZone>


            <Grid
                x:Name="Content_Grid"
                Grid.Row="1"
                Width="Auto">
                <StackPanel>
                    <materialDesign:ColorZone
                        Margin="10"
                        Panel.ZIndex="1"
                        Background="#17800080">
                        <StackPanel Margin="8,4">
                            <DockPanel>
                                <materialDesign:PackIcon
                                    Width="20"
                                    Height="20"
                                    Kind="MessageAlertOutline" />
                                <TextBlock
                                    Margin="4,0,0,0"
                                    VerticalAlignment="Center"
                                    TextWrapping="Wrap">
                                    <Run Text="您正在使用本软件的初期版本，功能可能不完善，稳定性亦无法保障。如果您遇到了Bug，可以向开发者反馈。未来本软件的UI和功能都会发生极大变化，敬请期待。" />
                                </TextBlock>
                            </DockPanel>
                        </StackPanel>
                    </materialDesign:ColorZone>

                    <ComboBox
                        x:Name="FilledComboBox"
                        Width="256"
                        Margin="20"
                        VerticalAlignment="Top"
                        materialDesign:HintAssist.Hint="选择配置文件"
                        Style="{StaticResource MaterialDesignFilledComboBox}" />
                    <Separator />
                    <!--<TextBlock
                        HorizontalAlignment="Center"
                        Style="{StaticResource Setting_Text_Main_Title}"
                        Text="或者……手动输入?" />-->
                    <!--<StackPanel>
                        <TextBox
                            MaxWidth="256"
                            Margin="10"
                            VerticalAlignment="Top"
                            materialDesign:HintAssist.Hint="躲藏时间"
                            AcceptsReturn="True"
                            IsEnabled="{Binding Path=IsChecked, ElementName=MaterialDesignFilledTextBoxEnabledComboBox}"
                            Style="{StaticResource MaterialDesignFilledTextBox}"
                            TextWrapping="Wrap" />
                        <TextBox
                            MaxWidth="256"
                            Margin="10"
                            VerticalAlignment="Top"
                            materialDesign:HintAssist.Hint="抓捕时间"
                            AcceptsReturn="True"
                            IsEnabled="{Binding Path=IsChecked, ElementName=MaterialDesignFilledTextBoxEnabledComboBox}"
                            Style="{StaticResource MaterialDesignFilledTextBox}"
                            TextWrapping="Wrap" />
                        <TextBox
                            MaxWidth="256"
                            Margin="10"
                            VerticalAlignment="Top"
                            materialDesign:HintAssist.Hint="全UI时间"
                            AcceptsReturn="True"
                            IsEnabled="{Binding Path=IsChecked, ElementName=MaterialDesignFilledTextBoxEnabledComboBox}"
                            Style="{StaticResource MaterialDesignFilledTextBox}"
                            TextWrapping="Wrap" />
                    </StackPanel>-->
                    <!--TODO-->
                    <Button Margin="10"
                        Width="128"
                            Content="导入配置文件"
                            Click="Import_Config_Button_Click"/>
                </StackPanel>

                <StackPanel
                    Margin="24"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Orientation="Horizontal">

                    <Button
                        IsEnabled="{Binding DataContext.ControlsEnabled, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                        Style="{StaticResource MaterialDesignFloatingActionButton}"
                        ToolTip="添加新配置文件"
                        Click="Add_Button_Click">
                        <materialDesign:PackIcon Kind="Add" Style="{StaticResource Large_Circle_Icon_Style}" />
                    </Button>
                    <Button
                        Margin="20,0,0,0"
                        IsEnabled="{Binding DataContext.ControlsEnabled, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                        Style="{StaticResource MaterialDesignFloatingActionButton}"
                        ToolTip="开始计时"
                        Click="Start_Button_Click">
                        <materialDesign:PackIcon Kind="Play" Style="{StaticResource Large_Circle_Icon_Style}" />
                    </Button>
                </StackPanel>

            </Grid>


        </Grid>
    </Grid>
</Window>
